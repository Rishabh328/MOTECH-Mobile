<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="org.motechproject.mobile.omp.manager.intellivr">
	<class name="IVRCallSession" table="ivr_call_session">
			<id name="id" column="call_session_id">
				<generator class="native" />
			</id>
			<version column="version" name="version"/>
			<property name="userId" type="string" column="user_id" not-null="true"/>
			<property name="phone" type="string" column="phone"/>
			<property name="language" type="string" column="language"/>
			<property name="callDirection" type="string" column="call_direction" not-null="true"/>
			<property name="attempts" type="int" column="attempts" not-null="true"/>
			<property name="days" type="int" column="days" not-null="true"/>
			<property name="state" type="int" column="state" not-null="true"/>
			<property name="created" type="timestamp" column="created"/>
			<property name="nextAttempt" type="timestamp" column="next_attempt"/>
			<set name="messageRequests" table="ivr_call_session_requests">
				<key column="ivr_call_session_id"/>
				<many-to-many column="message_request_id" class="org.motechproject.mobile.core.model.MessageRequestImpl"/>
			</set>
			<set name="calls" inverse="true" cascade="all">
				<key column="ivr_call_session"/>
				<one-to-many class="IVRCall"/>
			</set>
	</class>
</hibernate-mapping>